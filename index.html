<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>A Small Adventure Begins</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    body {
      margin: 0;
      font-family: system-ui, sans-serif;
      background: linear-gradient(180deg, #ffeef7, #eef4ff);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      overflow: hidden;
    }

    /* soft floating particles */
    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background-image:
        radial-gradient(circle at 20% 30%, rgba(255,255,255,.6) 2px, transparent 3px),
        radial-gradient(circle at 70% 60%, rgba(255,255,255,.6) 2px, transparent 3px),
        radial-gradient(circle at 40% 80%, rgba(255,255,255,.6) 2px, transparent 3px);
      animation: float 18s linear infinite;
      pointer-events: none;
    }

    @keyframes float {
      from { transform: translateY(0px); }
      to   { transform: translateY(-80px); }
    }

    .card {
      background: white;
      padding: 28px;
      max-width: 620px;
      width: 95%;
      border-radius: 18px;
      box-shadow: 0 15px 40px rgba(0,0,0,0.08);
    }

    .text {
      font-size: 18px;
      line-height: 1.6;
      margin-bottom: 18px;
      min-height: 90px;
      white-space: pre-line;
    }

    input {
      width: 100%;
      padding: 12px;
      font-size: 16px;
      border-radius: 10px;
      border: 1px solid #ddd;
      margin-bottom: 14px;
    }

    .choices {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    button {
      padding: 14px;
      font-size: 16px;
      border-radius: 12px;
      border: none;
      cursor: pointer;
      background: #c77dff;
      color: white;
      font-weight: 600;
    }

    button.secondary {
      background: #6b7280;
    }

    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
  </style>
</head>
<body>

<div class="card">
  <div id="story" class="text"></div>

  <input id="nameInput" placeholder="Type your name first…" />

  <div id="choices" class="choices"></div>
</div>

<script>
/* =====================================================
   JOURNEY SYSTEM (ROBUST + SIMPLE)
===================================================== */

function saveJourney(j) {
  localStorage.setItem("journey", JSON.stringify(j));
}

function getJourney() {
  return JSON.parse(localStorage.getItem("journey"));
}

/* ALWAYS reset fresh when entering index */
const journey = {
  name: "",
  path: "",
  order: ["index"]
};
saveJourney(journey);


/* =====================================================
   ELEMENTS
===================================================== */

const storyEl = document.getElementById("story");
const nameInput = document.getElementById("nameInput");
const choicesEl = document.getElementById("choices");


/* =====================================================
   NAME INPUT (FORCED)
===================================================== */

const startBtn = document.createElement("button");
startBtn.textContent = "Start";
startBtn.disabled = true;

choicesEl.appendChild(startBtn);

nameInput.addEventListener("input", () => {
  const name = nameInput.value.trim();
  startBtn.disabled = name.length === 0;

  const j = getJourney();
  j.name = name;
  saveJourney(j);
});


/* =====================================================
   STORY SYSTEM (NEXT BUTTON PAGES)
===================================================== */

let pages = [];
let pageIndex = 0;

function nextPage() {
  pageIndex++;

  if (pageIndex >= pages.length) {
    showPathChoices();
    return;
  }

  storyEl.textContent = pages[pageIndex];
}

function showNextButton() {
  choicesEl.innerHTML = "";
  const btn = document.createElement("button");
  btn.textContent = "Next";
  btn.onclick = nextPage;
  choicesEl.appendChild(btn);
}


/* =====================================================
   START STORY
===================================================== */

startBtn.onclick = () => {
  const j = getJourney();

  if (!j.name) return;

  nameInput.style.display = "none";

  const n = j.name;

  pages = [
    "You wake up somewhere quiet.\nToo quiet.",
    "No map. No instructions.\nJust a feeling that today is… different.",
    "Someone clearly prepared something for you.\n(Definitely not suspicious at all.)",
    "A small note on the floor reads:\n\"Hey " + n + "... try not to get lost.\"",
    "You hear my voice somewhere in the distance:\n\"Bon, let me know when you are in the mood.\"",
    "A path splits ahead.",
    "One side looks chaotic. Loud. Fast.\nThe kind of place where you run first and think later.",
    "The other side is quiet. Strange symbols everywhere.\nThe kind of place where you stop… and figure things out."
  ];

  pageIndex = 0;
  storyEl.textContent = pages[0];
  showNextButton();
};


/* =====================================================
   PATH CHOICES
===================================================== */

function showPathChoices() {
  storyEl.textContent =
    "So… what kind of player are you today?";

  choicesEl.innerHTML = "";

  const btnA = document.createElement("button");
  btnA.textContent = "Sprint ahead. Problems are future-you’s problem.";
  btnA.onclick = () => choosePath("A");

  const btnB = document.createElement("button");
  btnB.textContent = "Wait. Observe. Overthink like a professional.";
  btnB.classList.add("secondary");
  btnB.onclick = () => choosePath("B");

  choicesEl.appendChild(btnA);
  choicesEl.appendChild(btnB);
}


/* =====================================================
   REDIRECT LOGIC (FIXED + ROBUST)
===================================================== */

function choosePath(path) {
  const j = getJourney();

  j.path = path;
  saveJourney(j);

  if (path === "A") {
    window.location.href = "index1.html";
  } else {
    window.location.href = "index5.html"; // door puzzle first (your request)
  }
}
</script>

</body>
</html>
